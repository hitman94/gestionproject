<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<head>
</head>
<body>
	<ui:composition template="resources/template/layout.xhtml">

		<ui:define name="mainContent">

			<f:view>
				<div class="container">

					<div class="row">
						<h2>Liste des WorkPackages:</h2>
						<div class="col-md-6">
							<div class="row">
								<c:choose>
									<c:when test="${ sessionScope.user.ability == 'Patron'}">
										<c:forEach items="${workPackageDAO.findAll()}"
											var="workpackage">
											<div class="col-md-12">
												<dl>
													<dt>
														<h:outputText value="${workpackage.name}"></h:outputText>
													</dt>
													<dd>
														<h:outputText value="Option : Editer / Supprimer"></h:outputText>
													</dd>
												</dl>
											</div>
										</c:forEach>
									</c:when>
									<c:otherwise>
										<c:forEach
											items="${workPackageDAO.getWpFromCompany(sessionScope.user.entreprise.id)}"
											var="workpackage">
											<div class="col-md-12">
												<dl>
													<dt>
														<h:outputText value="${workpackage.name}"></h:outputText>
													</dt>
													<dd>
														<h:outputText value="Option : Editer / Supprimer"></h:outputText>
													</dd>
												</dl>
											</div>
										</c:forEach>
									</c:otherwise>
								</c:choose>

							</div>


						</div>
						<div class="col-md-offset-1 col-md-5"
							style="border-left: 1px solid grey;">
							<div class="alert alert-danger" role="alert" id="errorsZone"></div>
							<form class="form">
								<div class="form-group">
									<input type="text" placeholder="Nom du workPackage"
										name="nameWP" id="nameWP" class="form-control" />
								</div>
								<c:choose>
									<c:when test="${ sessionScope.user.ability == 'Patron'}">

										<div class="form-group">
											<label for="entrepriseWP">Selectionnez l'entreprise
												du Work Package:</label> <select class="form-control"
												id="entrepriseWP">
												<c:forEach items="${entrepriseDAO.findAll()}"
													var="entreprise">
													<option value="${entreprise.workspace.id}"><h:outputText
															value="${entreprise.name}" /></option>
												</c:forEach>

											</select>
										</div>
									</c:when>
										<c:otherwise>
											<div class="form-group">
												<input type="hidden" value="${sessionScope.user.entreprise.workspace.id}"
													name="entrepriseWP" id="entrepriseWP" class="form-control" />
											</div>
										</c:otherwise>
								</c:choose>
								<button type="button" id="submitWP"
									class="form-control btn btn-success">Cr√©er le
									WorkPackage</button>
							</form>
						</div>
					</div>

				</div>
				<SCRIPT type="text/javascript" src="resources/js/workpackages.js"></SCRIPT>
			</f:view>

		</ui:define>
	</ui:composition>
</body>
</html>