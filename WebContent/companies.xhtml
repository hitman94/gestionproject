<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<head>
</head>
<body>
	<ui:composition template="resources/template/layout.xhtml">

		<ui:define name="mainContent">

			<f:view>
				<div class="container">

					<div class="row">
						<h3>Entreprises</h3>
						<HR />
						<div class="col-md-6">


							<c:forEach items="${entrepriseDAO.findAll()}" var="entreprise">

								<dl>
									<dt>
										<h3>
											<h:outputText value="${entreprise.name}"></h:outputText>
										</h3>
									</dt>
									<dd>
										<div class="row">
											<div class="col-md-10 col-md-offset-1">
												<Strong><h:outputText
														value="Chef :  ${entreprise.chief.userName}"></h:outputText></Strong>
											</div>
											<div class="col-md-10 col-md-offset-1">

												<a id="changeChiefLink" href="#">Changer le chef</a>
												<div id="changeChiefDiv" style="display: none">
													<label for="newChief">Sélectionnez le nouveau chef
														de l'entreprise</label> <select class="form-control" id="newChief">
														<c:forEach items="${userDAO.userWithoutCompanies()}"
															var="user">
															<c:if test="${ sessionScope.user.id != user.id }">
																<option value="${user.id}"><h:outputText
																		value="${user.userName}" /></option>

															</c:if>

														</c:forEach>

													</select> <a onclick="updateChiefEntreprise(${entreprise.id})" href="#">mettre
														a jour</a>
												</div>
											</div>
											<div class="col-md-10 col-md-offset-1">
												<a onclick="deleteEntreprise(${entreprise.id})" href="#">Supprimer
													Entreprise</a>

											</div>
										</div>
									</dd>
								</dl>

							</c:forEach>



						</div>
						<div class="col-md-offset-1 col-md-5"
							style="border-left: 1px solid grey;">

							<h3>Création d'une entreprise</h3>

							<div class="alert alert-danger" role="alert" id="errorsZone"></div>
							<form class="form">
								<div class="form-group">
									<input type="text" placeholder="Nom de l'entreprise"
										name="companyName" id="companyName" class="form-control" />
								</div>
								<div class="form-group">
									<label for="chefC">Sélectionnez le chef de l'entreprise</label>
									<select class="form-control" id="chefC">
										<c:forEach items="${userDAO.userWithoutCompanies()}"
											var="user">
											<c:if test="${ sessionScope.user.id != user.id }">
												<option value="${user.id}"><h:outputText
														value="${user.userName}" /></option>
											</c:if>
										</c:forEach>

									</select>
								</div>
								<button type="button" id="submitCompany"
									class="form-control btn btn-success">Créer
									l'entreprise</button>
							</form>
						</div>
					</div>

				</div>
				<SCRIPT type="text/javascript" src="resources/js/company.js"></SCRIPT>
			</f:view>

		</ui:define>


	</ui:composition>





</body>
</html>
